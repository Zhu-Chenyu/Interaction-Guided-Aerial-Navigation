<?xml version="1.0" encoding="UTF-8"?>
<launch>
    <arg name="use_rviz" default="true" description="Open rviz"/>
    <arg name="use_jsp" default="true" description="Use joint state publisher"/>
    <arg name="color" default="light_gray"/>
    <arg name="namespace" default="X500V2"/>

    <node pkg="robot_state_publisher" exec="robot_state_publisher" name="robot_state_publisher" namespace="$(var namespace)">
        <param name="robot_description" type="str"
            value="$(command 'xacro $(find-pkg-share drone_description)/urdf/X500V2.urdf.xacro color:=$(var color)')"/>
    </node>

    <node pkg="joint_state_publisher" exec="joint_state_publisher" namespace="$(var namespace)"
        if="$(eval '\'$(var use_jsp)\' == \'true\'')"/>

    <node pkg="rviz2" exec="rviz2" name="rviz2" on_exit="shutdown" namespace="$(var namespace)" args="-d $(find-pkg-share drone_description)/config/x500v2_view.rviz"
        if="$(eval '\'$(var use_rviz)\' == \'true\'')"/>
</launch>
